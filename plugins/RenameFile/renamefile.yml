name: RenameFile
description: Renames video (scene) file names when the user edits the [Title] field located in the scene [Edit] tab.
version: 0.4.6
url: https://github.com/David-Maisonave/Axter-Stash/tree/main/plugins/RenameFile
settings:
  performerAppend:
    displayName: Append Performers
    description: Enable to append performers name to file name when renaming a file. Requires performers to be included in [Key Fields] list, which by default it is included.
    type: BOOLEAN
  studioAppend:
    displayName: Append Studio
    description: Enable to append studio name to file name when renaming a file. Requires studio to be included in [Key Fields] list, which by default it is included.
    type: BOOLEAN
  tagAppend:
    displayName: Append Tags
    description: Enable to append tag names to file name when renaming a file. Requires tags to be included in [Key Fields] list, which by default it is included.
    type: BOOLEAN
  z_keyFIeldsIncludeInFileName: # Prefixing z_ to variable names so that the GUI will place these fields after above fields (alphabatically listed)
    displayName: Include Existing Key Field
    description: Enable to append performer, tags, studios, & galleries even if name already exists in the original file name.
    type: BOOLEAN
  zafileRenameViaMove:
    displayName: Move Instead of Rename
    description: Enable to move file instead of rename file. (Not recommended for Windows OS)
    type: BOOLEAN
  zfieldKeyList:
    displayName: Key Fields
    description: '(Default=title,performers,studio,tags) Define key fields to use to format the file name. This is a comma seperated list, and the list should be in the desired format order. For example, if the user wants the performers name before the title, set the performers name first. Example:"performers,title,tags". This is an example of user adding height:"title,performers,tags,height"  Here''s an example using all of the supported fields: "title,performers,tags,studio,galleries,resolution,width,height,video_codec,frame_rate,date".'
    type: STRING
  zmaximumTagKeys:
    displayName: Max Tag Keys
    description: (Default=12) Maximum quantity of tag keys to append to file name. 0=Default(12); -1=No tags appended.
    type: NUMBER
  zseparators:
    displayName: Separator
    description: '(Default=-) Define the separator to use between different parts of the filename. Example Usage: ","'
    type: STRING
  zzdebugTracing:
    displayName: Debug Tracing
    description: (Default=false) [***For Advanced Users***] Enable debug tracing. When enabled, additional tracing logging is added to Stash\plugins\RenameFile\renamefile.log
    type: BOOLEAN
  zzdryRun:
    displayName: Dry Run
    description: Enable to run script in [Dry Run] mode. In dry run mode, files are NOT renamed, and only logging is performed. Use the logging to determine if rename will occur as expected. This should always be enabled on the first run after renamefile_settings.py has been modified.
    type: BOOLEAN
exec:
  - python
  - "{pluginDir}/renamefile.py"
interface: raw
hooks:
  - name: RenameFiles
    description: Renames scene files.
    triggeredBy:
      - Scene.Update.Post
tasks:
  - name: Rename Last Scene
    description: Renames file of last updated scene.
    defaultArgs:
      mode: rename_files_task
